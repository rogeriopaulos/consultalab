{% extends "base.html" %}

{% load static %}

{% block title %}
  Home
{% endblock title %}
{% block content %}
  <div class="row row-cols-1 row-cols-md-2 g-4">
    <div class="col">
      <div class="card text-center">
        <img src="{% static 'images/img_card_pix.webp' %}"
             class="card-img-top cp-img-cards"
             alt="..." />
        <div class="card-body">
          <a href="#"
             class="card-link"
             hx-get="{% url 'bacen:cpf_cnpj' %}"
             hx-target="#modals-consulta"
             hx-trigger="click"
             data-bs-toggle="modal"
             data-bs-target="#modals-consulta">CPF/CNPJ</a>
          <a href="#"
             class="card-link"
             hx-get="{% url 'bacen:chave' %}"
             hx-target="#modals-consulta"
             hx-trigger="click"
             data-bs-toggle="modal"
             data-bs-target="#modals-consulta">Chave</a>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card text-center">
        <img src="{% static 'images/img_card_ccs.png' %}"
             class="card-img-top cp-img-cards"
             alt="..." />
        <div class="card-body">
          <a href="#" class="card-link" disabled>Consultar</a>
        </div>
      </div>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Termo</th>
            <th scope="col">Tipo</th>
            <th scope="col">Motivo</th>
            <th scope="col">Data</th>
            <th scope="col">Processada?</th>
            <th scope="col">Status</th>
            <th scope="col">Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for requisicao in requisicoes %}
            <tr>
              <th scope="row">{{ forloop.counter }}</th>
              <td>{{ requisicao.termo_busca }}</td>
              <td>{{ requisicao.get_tipo_requisicao_display }}</td>
              <td>{{ requisicao.motivo }}</td>
              <td>{{ requisicao.created }}</td>
              <td class="text-center">
                {% if requisicao.processada %}
                  <i class="bi bi-check-circle text-success"></i>
                {% else %}
                  <i class="bi bi-x-circle text-danger"></i>
                {% endif %}
              </td>
              <td>
                {% if not requisicao.processada %}
                  <span class="badge text-bg-primary">
                    <i class="bi bi-eye"></i> <a href="#" class="text-decoration-none text-light">Detalhes</a>
                  </span>
                {% else %}
                  <span class="badge text-bg-secondary">
                    <i class="bi bi-exclamation-triangle"
                       data-bs-toggle="tooltip"
                       data-bs-title="Aguardando processamento...">
                    </i>
                    Pendente
                  </span>
                {% endif %}
              </td>
              <td>
                <a href="#" class="text-decoration-none text-info">
                  <i class="bi bi-play-circle me-2"
                     data-bs-toggle="tooltip"
                     data-bs-title="Processar consulta"></i>
                </a>
                <a href="#" class="text-decoration-none text-danger">
                  <i class="bi bi-trash"
                     data-bs-toggle="tooltip"
                     data-bs-title="Remover consulta"></i>
                </a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <div class="mt-4 text-center">
        <button class="btn btn-outline-primary">
          <i class="bi bi-play-circle me-2"></i> Processar em lote
        </button>
      </div>
    </div>
  </div>
  <!-- Modal Consultas -->
  <div id="modals-consulta"
       class="modal modal-blur fade"
       aria-hidden="false"
       tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
      <div class="modal-content"></div>
    </div>
  </div>
{% endblock content %}
